

# Solidity分为预留部分和数据部分（参数、局部变量等）
内存中数据的读写操作gas费很低，主要由以下两个原因：一是数据分别放在各自的内存槽中，而不是尽量压缩在一个槽中。如果是后者，那EVM每次使用数据时就会多一步操作，从槽中截取出真正自己要使用的数据，也就有了更多的gas消耗。二是内存空间是临时的，使用完就会释放，并不像Storage存储那样永久占用链上空间。因此，数据各自占用一个槽位，不仅带来了计算时的便利，又不会真正占用存储空间，gas费自然就低。

## 保留部分为前4个内存插槽，每个插槽32字节，用于特殊目的：
+ 0x00 - 0x3f （64字节）：用于计算存储哈希方法的临时空间，比如读取mapping里的数据时，要用到key的hash值，key的hash结果就暂存在这里。
+ 0x40 - 0x5f （32字节）：当前待分配的内存大小，又称空闲内存指针（Free Memory Pointer），指向当前空闲的内存位置。Solidity 总会把新对象保存在空闲内存指针的位置，并更新它的值到下一个空闲位置。
+ 0x60 - 0x7f （32字节）： 32字节的0值插槽，用于需要零值的地方，比如动态长度数据的初始长度值。

## 数据部分
通常的存储范式为：变量的字节大小 + 变量的数据值。对于动态变量，存储的范式为：变量在内存中的指针 + 变量的字节大小 + 变量的数据值，其中变量在内存中的指针，指的是有多个变量时，会依次记录每个变量的内存指针（如果是32字节的0值，这个指针可能就是0x60），用于数据值的寻址。